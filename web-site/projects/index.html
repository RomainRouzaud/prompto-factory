<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="../../favicon.ico">

<title>The Prompto Platform</title>

<!-- Bootstrap core CSS -->
<link href="../css/bootstrap.min.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="../css/prompto-frame.css" rel="stylesheet">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

<script src="../js/lib/jquery.min.js"></script>
<script src="../js/lib/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../js/lib/ie10-viewport-bug-workaround.js"></script>
<!-- ensure content menu is highlighted -->
<script type="text/javascript">
	$(document).ready(function() {
        $.getJSON('/ws/run/getRecentModules?params=[{"name":"count", "type":"Integer", "value":10}]', null, displayRecent);
        $.getJSON('/ws/run/getAllModules', null, displayAll);
	});

    function displayRecent(response) {
        display('recent', response);
    }

    function displayAll(response) {
        display('all', response);
    }

    function display(id, response) {
        if(response.error)
            alert(response.error);
        if(response.data.length==0)
            $("#" + id).hide();
        else {
            var html = [];
            response.data.map( function(item) {
                var module = item.value;
                $.merge(html, [
                        '<div class="col-xs-4 col-sm-2 placeholder" width="120px">',
                        '<h4>',
                        '<a id="',
                        module.dbId,
                        '" href="../ide/index.html?dbId=',
                        module.dbId,
                        '&name=',
                        module.name,
                        '" target="_blank" class="thumbnail">',
                        '<img src="',
                        module.image ? module.image : "/img/library.jpg",
                        '" max-width="90%">',
                        '<strong>',
                        module.name,
                        '</strong>',
                        '<br/>',
                        '<span class="text-muted">',
                        module.description,
                        '</span>',
                        '</a>',
                        '</h4>',
                        '</div>'
                ]);
            });
            $("#" + id + "-items").html(html.join(""));
            $("#" + id).show();
        }
    }

</script>

</head>

<body>
	<div class="container-fluid">
		<div class="row">
			<div id="recent" class="col-sm-9 col-md-10 main">
				<h1 class="page-header">Recent projects</h1>
				<div id="recent-items" class="row placeholders">
				</div>
			</div>
            <div id="all" class="col-sm-9 col-md-10 main">
                <h1 class="page-header">All projects</h1>
                <div id="all-items" class="row placeholders">
               </div>
            </div>
		</div>
	</div>
</body>
</html>

